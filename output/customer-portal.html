<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>æ‹’ä»˜é¢„è­¦ç®¡ç†å¹³å° - å•†æˆ·é—¨æˆ·</title>
  <style>
    /* CSSå˜é‡å®šä¹‰ */
    :root {
      /* ä¸»è‰²è°ƒ - æ©™è‰²ç³» */
      --primary-orange: #FF6B35;
      --primary-orange-light: #FF8659;
      --primary-orange-dark: #E55A2B;
      --primary-orange-pale: #FFF4F0;

      /* è¾…åŠ©è‰²å½© */
      --secondary-blue: #2E86C1;
      --secondary-green: #28B463;
      --secondary-red: #E74C3C;
      --secondary-yellow: #F39C12;

      /* ä¸­æ€§è‰²å½© */
      --gray-50: #F8FAFC;
      --gray-100: #F1F5F9;
      --gray-200: #E2E8F0;
      --gray-300: #CBD5E1;
      --gray-400: #94A3B8;
      --gray-500: #64748B;
      --gray-600: #475569;
      --gray-700: #334155;
      --gray-800: #1E293B;
      --gray-900: #0F172A;

      /* èƒŒæ™¯è‰²å½© */
      --bg-primary: #FFFFFF;
      --bg-secondary: #F8FAFC;
      --bg-tertiary: #F1F5F9;

      /* çŠ¶æ€è‰²å½© */
      --success: #22C55E;
      --success-light: #DCFCE7;
      --warning: #F59E0B;
      --warning-light: #FEF3C7;
      --danger: #EF4444;
      --danger-light: #FEE2E2;
      --info: #3B82F6;
      --info-light: #DBEAFE;

      /* é£é™©ç­‰çº§è‰²å½© */
      --risk-high: #DC2626;
      --risk-medium: #F59E0B;
      --risk-low: #16A34A;

      /* å­—ä½“è§„èŒƒ */
      --font-family-base: 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif;
      --font-family-number: 'SF Mono', 'Monaco', 'Inconsolata', 'Roboto Mono', monospace;

      /* å­—ä½“å¤§å° */
      --font-size-h1: 32px;
      --font-size-h2: 24px;
      --font-size-h3: 20px;
      --font-size-h4: 18px;
      --font-size-h5: 16px;
      --font-size-base: 14px;
      --font-size-large: 16px;
      --font-size-small: 12px;
      --font-size-xs: 10px;

      /* é—´è·ç³»ç»Ÿ */
      --spacing-xs: 4px;
      --spacing-sm: 8px;
      --spacing-md: 16px;
      --spacing-lg: 24px;
      --spacing-xl: 32px;
      --spacing-2xl: 48px;

      /* åœ†è§’ä¸é˜´å½± */
      --border-radius-sm: 4px;
      --border-radius-md: 6px;
      --border-radius-lg: 8px;
      --border-radius-xl: 12px;
      --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
      --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
      --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
      --shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
    }

    /* å…¨å±€æ ·å¼é‡ç½® */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: var(--font-family-base);
      font-size: var(--font-size-base);
      line-height: 1.5;
      color: var(--gray-700);
      background: var(--bg-secondary);
    }

    /* é€šç”¨ç»„ä»¶æ ·å¼ */
    .btn {
      display: inline-flex;
      align-items: center;
      gap: var(--spacing-sm);
      padding: var(--spacing-sm) var(--spacing-md);
      border-radius: var(--border-radius-md);
      font-size: var(--font-size-base);
      font-weight: 500;
      border: none;
      cursor: pointer;
      transition: all 0.2s ease;
      text-decoration: none;
    }

    .btn-primary {
      background: var(--primary-orange);
      color: white;
    }

    .btn-primary:hover {
      background: var(--primary-orange-dark);
      transform: translateY(-1px);
      box-shadow: var(--shadow-md);
    }

    .btn-secondary {
      background: var(--gray-100);
      color: var(--gray-600);
      border: 1px solid var(--gray-200);
    }

    .btn-text {
      background: transparent;
      color: var(--primary-orange);
      padding: var(--spacing-xs) var(--spacing-sm);
    }

    .btn-block {
      width: 100%;
      justify-content: center;
    }

    .card {
      background: var(--bg-primary);
      border-radius: var(--border-radius-lg);
      box-shadow: var(--shadow-sm);
      border: 1px solid var(--gray-200);
      overflow: hidden;
    }

    .card-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: var(--spacing-lg);
      border-bottom: 1px solid var(--gray-200);
      background: var(--bg-secondary);
    }

    .card-title {
      margin: 0;
      font-size: var(--font-size-h4);
      font-weight: 600;
      color: var(--gray-700);
    }

    .card-body {
      padding: var(--spacing-lg);
    }

    .form-field {
      margin-bottom: var(--spacing-md);
    }

    .form-label {
      display: block;
      margin-bottom: var(--spacing-sm);
      font-size: var(--font-size-base);
      font-weight: 500;
      color: var(--gray-700);
    }

    .form-input {
      width: 100%;
      padding: 12px 16px;
      border: 1px solid var(--gray-200);
      border-radius: var(--border-radius-md);
      font-size: var(--font-size-base);
      transition: border-color 0.2s ease;
    }

    .form-input:focus {
      outline: none;
      border-color: var(--primary-orange);
      box-shadow: 0 0 0 3px var(--primary-orange-pale);
    }

    .form-select {
      width: 100%;
      padding: 8px 12px;
      border: 1px solid var(--gray-200);
      border-radius: var(--border-radius-md);
      font-size: var(--font-size-base);
      background: white;
    }

    .form-textarea {
      width: 100%;
      padding: 12px 16px;
      border: 1px solid var(--gray-200);
      border-radius: var(--border-radius-md);
      font-size: var(--font-size-base);
      font-family: inherit;
      resize: vertical;
      min-height: 80px;
    }

    .badge {
      display: inline-flex;
      align-items: center;
      padding: 4px 8px;
      border-radius: 12px;
      font-size: var(--font-size-small);
      font-weight: 500;
      line-height: 1;
    }

    .badge-success {
      background: var(--success-light);
      color: var(--success);
    }

    .badge-warning {
      background: var(--warning-light);
      color: var(--warning);
    }

    .badge-danger {
      background: var(--danger-light);
      color: var(--danger);
    }

    .badge-info {
      background: var(--info-light);
      color: var(--info);
    }

    .badge-secondary {
      background: var(--gray-200);
      color: var(--gray-600);
    }

    .risk-badge {
      padding: 6px 12px;
      border-radius: var(--border-radius-md);
      font-weight: 600;
      font-size: var(--font-size-small);
      color: white;
    }

    .risk-high { background: var(--risk-high); }
    .risk-medium { background: var(--risk-medium); }
    .risk-low { background: var(--risk-low); }

    /* é¡µé¢å®¹å™¨ */
    .page {
      display: none;
      min-height: 100vh;
    }

    .page.active {
      display: block;
    }

    /* ç™»å½•é¡µé¢æ ·å¼ */
    .login-page {
      display: grid;
      grid-template-columns: 1fr 1fr;
      min-height: 100vh;
      background: linear-gradient(135deg, var(--primary-orange-pale) 0%, var(--bg-primary) 100%);
    }

    .login-container {
      display: flex;
      flex-direction: column;
      justify-content: center;
      padding: var(--spacing-2xl);
      max-width: 400px;
      margin: 0 auto;
    }

    .login-header {
      text-align: center;
      margin-bottom: var(--spacing-2xl);
    }

    .logo {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: var(--spacing-sm);
      margin-bottom: var(--spacing-md);
    }

    .logo-icon {
      width: 48px;
      height: 48px;
      background: var(--primary-orange);
      border-radius: var(--border-radius-lg);
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-size: 24px;
      font-weight: bold;
    }

    .login-title {
      color: var(--gray-700);
      font-size: var(--font-size-h2);
      margin: 0;
    }

    .login-subtitle {
      color: var(--gray-500);
      margin-top: var(--spacing-sm);
    }

    .login-form {
      display: flex;
      flex-direction: column;
      gap: var(--spacing-lg);
    }

    .form-options {
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .form-footer {
      text-align: center;
      color: var(--gray-500);
    }

    .login-illustration {
      display: flex;
      align-items: center;
      justify-content: center;
      padding: var(--spacing-2xl);
      background: var(--primary-orange-pale);
      position: relative;
    }

    .illustration-placeholder {
      width: 300px;
      height: 300px;
      background: var(--primary-orange);
      border-radius: var(--border-radius-xl);
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-size: var(--font-size-h3);
      text-align: center;
    }

    /* ä¸»åº”ç”¨å¸ƒå±€ */
    .app-layout {
      display: grid;
      grid-template-areas: 
        "header header"
        "sidebar main";
      grid-template-columns: 260px 1fr;
      grid-template-rows: 64px 1fr;
      height: 100vh;
      background: var(--bg-secondary);
    }

    .app-header {
      grid-area: header;
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 0 var(--spacing-lg);
      background: var(--bg-primary);
      border-bottom: 1px solid var(--gray-200);
      box-shadow: var(--shadow-sm);
    }

    .header-left .logo {
      justify-content: flex-start;
    }

    .logo-text {
      font-size: var(--font-size-large);
      font-weight: 600;
      color: var(--gray-700);
    }

    .user-menu {
      display: flex;
      align-items: center;
      gap: var(--spacing-sm);
      cursor: pointer;
    }

    .user-avatar {
      width: 36px;
      height: 36px;
      border-radius: 50%;
      background: var(--primary-orange);
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-weight: 600;
    }

    .app-sidebar {
      grid-area: sidebar;
      background: var(--bg-primary);
      border-right: 1px solid var(--gray-200);
      padding: var(--spacing-lg) 0;
    }

    .sidebar-nav {
      display: flex;
      flex-direction: column;
      gap: var(--spacing-xs);
      padding: 0 var(--spacing-md);
    }

    .nav-item {
      display: flex;
      align-items: center;
      gap: var(--spacing-sm);
      padding: 12px var(--spacing-md);
      border-radius: var(--border-radius-md);
      color: var(--gray-600);
      text-decoration: none;
      transition: all 0.2s ease;
      cursor: pointer;
    }

    .nav-item:hover {
      background: var(--gray-100);
      color: var(--gray-700);
    }

    .nav-item.active {
      background: var(--primary-orange-pale);
      color: var(--primary-orange);
    }

    .nav-icon {
      width: 20px;
      height: 20px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .app-main {
      grid-area: main;
      padding: var(--spacing-lg);
      overflow-y: auto;
    }

    .page-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: var(--spacing-xl);
    }

    .page-title {
      margin: 0;
      font-size: var(--font-size-h2);
      font-weight: 600;
      color: var(--gray-700);
    }

    /* ä»ªè¡¨æ¿æ ·å¼ */
    .dashboard {
      display: flex;
      flex-direction: column;
      gap: var(--spacing-xl);
    }

    .metrics-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: var(--spacing-lg);
    }

    .metric-card {
      display: flex;
      align-items: center;
      gap: var(--spacing-md);
      padding: var(--spacing-lg);
      background: var(--bg-primary);
      border-radius: var(--border-radius-lg);
      box-shadow: var(--shadow-sm);
      border: 1px solid var(--gray-200);
    }

    .metric-icon {
      width: 48px;
      height: 48px;
      border-radius: var(--border-radius-lg);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 24px;
    }

    .metric-icon-orange { background: var(--primary-orange-pale); color: var(--primary-orange); }
    .metric-icon-blue { background: var(--info-light); color: var(--info); }
    .metric-icon-green { background: var(--success-light); color: var(--success); }
    .metric-icon-red { background: var(--danger-light); color: var(--danger); }

    .metric-content {
      flex: 1;
    }

    .metric-value {
      font-size: var(--font-size-h2);
      font-weight: 700;
      color: var(--gray-700);
      font-family: var(--font-family-number);
    }

    .metric-label {
      font-size: var(--font-size-base);
      color: var(--gray-500);
      margin-top: var(--spacing-xs);
    }

    .metric-change {
      font-size: var(--font-size-small);
      font-weight: 600;
      margin-top: var(--spacing-xs);
    }

    .metric-change.positive { color: var(--success); }
    .metric-change.negative { color: var(--danger); }

    /* å¡ç‰‡ç®¡ç†æ ·å¼ */
    .card-form {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: var(--spacing-lg);
    }

    .card-list {
      display: flex;
      flex-direction: column;
      gap: var(--spacing-sm);
    }

    .card-item {
      display: grid;
      grid-template-columns: 2fr 1fr 1fr 1fr 100px;
      gap: var(--spacing-md);
      padding: var(--spacing-md);
      border-radius: var(--border-radius-md);
      border: 1px solid var(--gray-200);
      align-items: center;
      background: var(--bg-primary);
    }

    .card-item:hover {
      box-shadow: var(--shadow-md);
    }

    /* é¢„è­¦åˆ—è¡¨æ ·å¼ */
    .filters-bar {
      display: flex;
      justify-content: space-between;
      align-items: flex-end;
      gap: var(--spacing-lg);
      padding: var(--spacing-lg);
      background: var(--bg-primary);
      border-radius: var(--border-radius-lg);
      box-shadow: var(--shadow-sm);
      border: 1px solid var(--gray-200);
      margin-bottom: var(--spacing-lg);
    }

    .filters-left {
      display: flex;
      gap: var(--spacing-lg);
      flex-wrap: wrap;
    }

    .filters-right {
      display: flex;
      gap: var(--spacing-sm);
    }

    .filter-group {
      display: flex;
      flex-direction: column;
      gap: var(--spacing-xs);
      min-width: 120px;
    }

    .filter-group label {
      font-size: var(--font-size-small);
      font-weight: 500;
      color: var(--gray-600);
    }

    .data-table {
      width: 100%;
      border-collapse: collapse;
    }

    .data-table th {
      padding: var(--spacing-md);
      text-align: left;
      font-weight: 600;
      color: var(--gray-700);
      background: var(--bg-secondary);
      border-bottom: 1px solid var(--gray-200);
    }

    .data-table td {
      padding: var(--spacing-md);
      border-bottom: 1px solid var(--gray-200);
    }

    .table-row:hover {
      background: var(--bg-secondary);
    }

    /* é¢„è­¦è¯¦æƒ…æ ·å¼ */
    .breadcrumb {
      display: flex;
      align-items: center;
      gap: var(--spacing-sm);
      font-size: var(--font-size-base);
      color: var(--gray-500);
      margin-bottom: var(--spacing-lg);
    }

    .breadcrumb a {
      color: var(--primary-orange);
      text-decoration: none;
      cursor: pointer;
    }

    .breadcrumb-separator {
      color: var(--gray-300);
    }

    .breadcrumb-current {
      color: var(--gray-700);
      font-weight: 500;
    }

    .alert-summary {
      background: var(--bg-primary);
      border-radius: var(--border-radius-lg);
      box-shadow: var(--shadow-sm);
      border: 1px solid var(--gray-200);
      padding: var(--spacing-xl);
      margin-bottom: var(--spacing-lg);
    }

    .alert-header {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      margin-bottom: var(--spacing-lg);
    }

    .alert-title h1 {
      margin: 0;
      font-size: var(--font-size-h2);
      color: var(--gray-700);
    }

    .alert-meta {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: var(--spacing-lg);
    }

    .meta-item {
      display: flex;
      flex-direction: column;
      gap: var(--spacing-xs);
    }

    .meta-label {
      font-size: var(--font-size-small);
      color: var(--gray-400);
      font-weight: 500;
    }

    .meta-value {
      font-size: var(--font-size-base);
      color: var(--gray-700);
      font-weight: 600;
    }

    /* å¼¹çª—æ ·å¼ */
    .modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.5);
      z-index: 1000;
      animation: fadeIn 0.3s ease;
    }

    .modal.active {
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .modal-content {
      background: var(--bg-primary);
      border-radius: var(--border-radius-lg);
      box-shadow: var(--shadow-xl);
      max-width: 600px;
      width: 90%;
      max-height: 90vh;
      overflow-y: auto;
      animation: slideIn 0.3s ease;
    }

    @keyframes slideIn {
      from {
        transform: translateY(-50px);
        opacity: 0;
      }
      to {
        transform: translateY(0);
        opacity: 1;
      }
    }

    /* å“åº”å¼è®¾è®¡ */
    @media (max-width: 768px) {
      .login-page {
        grid-template-columns: 1fr;
      }
      
      .login-illustration {
        display: none;
      }

      .app-layout {
        grid-template-areas: 
          "header"
          "main";
        grid-template-columns: 1fr;
      }
      
      .app-sidebar {
        display: none;
      }

      .metrics-grid {
        grid-template-columns: 1fr;
      }

      .filters-bar {
        flex-direction: column;
        align-items: stretch;
      }
      
      .filters-left {
        flex-direction: column;
        gap: var(--spacing-md);
      }
    }

    /* åŠ¨ç”»æ•ˆæœ */
    .fade-in {
      animation: fadeIn 0.3s ease;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }

    /* å·¥å…·ç±» */
    .hidden {
      display: none !important;
    }

    .text-center {
      text-align: center;
    }

    .text-right {
      text-align: right;
    }
  </style>
</head>
<body>
  <!-- ç™»å½•é¡µé¢ -->
  <div id="login-page" class="page active">
    <div class="login-page">
      <div class="login-container">
        <div class="login-header">
          <div class="logo">
            <div class="logo-icon">æ‹’</div>
          </div>
          <h1 class="login-title">å•†æˆ·é—¨æˆ·</h1>
          <p class="login-subtitle">æ‹’ä»˜é¢„è­¦ç®¡ç†å¹³å°</p>
        </div>
        
        <form class="login-form" onsubmit="handleLogin(event)">
          <div class="form-field">
            <label class="form-label">ç™»å½•é‚®ç®±</label>
            <input type="email" class="form-input" placeholder="è¯·è¾“å…¥é‚®ç®±åœ°å€" required>
          </div>
          
          <div class="form-field">
            <label class="form-label">ç™»å½•å¯†ç </label>
            <input type="password" class="form-input" placeholder="è¯·è¾“å…¥å¯†ç " required>
          </div>
          
          <div class="form-options">
            <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
              <input type="checkbox">
              <span>è®°ä½å¯†ç </span>
            </label>
          </div>
          
          <button type="submit" class="btn btn-primary btn-block">ç™»å½•</button>
        </form>
      </div>
      
      <div class="login-illustration">
        <div class="illustration-placeholder">
          ä¸“ä¸šçš„æ‹’ä»˜<br>é¢„è­¦æœåŠ¡
        </div>
      </div>
    </div>
  </div>

  <!-- ä¸»åº”ç”¨é¡µé¢ -->
  <div id="app-page" class="page">
    <div class="app-layout">
      <!-- é¡¶éƒ¨å¯¼èˆªæ  -->
      <header class="app-header">
        <div class="header-left">
          <div class="logo">
            <div class="logo-icon" style="width: 32px; height: 32px; font-size: 16px;">æ‹’</div>
            <span class="logo-text">æ‹’ä»˜é¢„è­¦ç®¡ç†å¹³å°</span>
          </div>
        </div>
        <div class="header-right">
          <div class="user-menu">
            <div class="user-avatar">å¼ </div>
            <span style="color: var(--gray-700); font-weight: 500;">å¼ ä¸‰ï¼ˆABCå•†æˆ·ï¼‰</span>
            <button class="btn btn-text" onclick="handleLogout()">é€€å‡º</button>
          </div>
        </div>
      </header>

      <!-- ä¾§è¾¹å¯¼èˆªæ  -->
      <aside class="app-sidebar">
        <nav class="sidebar-nav">
          <a href="#" class="nav-item active" onclick="showPage('cards')">
            <div class="nav-icon">ğŸ’³</div>
            <span>å¡ç‰‡ç®¡ç†</span>
          </a>
          <a href="#" class="nav-item" onclick="showPage('alerts')">
            <div class="nav-icon">âš ï¸</div>
            <span>é¢„è­¦ä¸­å¿ƒ</span>
          </a>
        </nav>
      </aside>

      <!-- ä¸»å†…å®¹åŒºåŸŸ -->
      <main class="app-main">
        <!-- å¡ç‰‡ç®¡ç†é¡µé¢ -->
        <div id="cards-content" class="content-page active">
          <div class="page-header">
            <h1 class="page-title">å¡ç‰‡ç®¡ç†</h1>
            <div class="page-actions">
              <button class="btn btn-primary" onclick="showAddCardModal()">æ·»åŠ å¡ç‰‡</button>
            </div>
          </div>
          
          <!-- ç­›é€‰æ  -->
          <div class="filters-bar">
            <div class="filters-left">
              <div class="filter-group">
                <label>æè¿°ç¬¦</label>
                <input type="text" class="form-input" placeholder="è¯·è¾“å…¥æè¿°ç¬¦" id="filter-descriptor">
              </div>
              
              <div class="filter-group">
                <label>åˆ›å»ºæ—¶é—´èŒƒå›´</label>
                <div style="display: flex; gap: var(--spacing-sm);">
                  <input type="date" class="form-input" id="filter-date-start" style="width: 140px;">
                  <span style="line-height: 2.5; color: var(--gray-500);">è‡³</span>
                  <input type="date" class="form-input" id="filter-date-end" style="width: 140px;">
                </div>
              </div>
              
              <div class="filter-group">
                <label>çŠ¶æ€</label>
                <select class="form-select" id="filter-status">
                  <option value="">å…¨éƒ¨çŠ¶æ€</option>
                  <option value="æŠ¥å¤‡ä¸­">æŠ¥å¤‡ä¸­</option>
                  <option value="å·²æŠ¥å¤‡">å·²æŠ¥å¤‡</option>
                  <option value="å·²å…³é—­">å·²å…³é—­</option>
                </select>
              </div>
            </div>
            
            <div class="filters-right">
              <button class="btn btn-secondary" onclick="resetFilters()">é‡ç½®</button>
              <button class="btn btn-primary" onclick="applyFilters()">æœç´¢</button>
            </div>
          </div>
          
          <!-- å¡ç‰‡åˆ—è¡¨ -->
          <div class="card">
            <div class="card-header">
              <h3 class="card-title">å·²æˆæƒå¡ç‰‡</h3>
            </div>
            <div class="card-body">
              <div style="overflow-x: auto;">
                <table class="data-table">
                  <thead>
                    <tr>
                      <th>æè¿°ç¬¦</th>
                      <th>å¡ç‰‡BIN</th>
                      <th>CAID</th>
                      <th>çŠ¶æ€</th>
                      <th>åˆ›å»ºæ—¶é—´</th>
                      <th>æ“ä½œ</th>
                    </tr>
                  </thead>
                  <tbody id="cards-table-body">
                    <!-- åŠ¨æ€ç”Ÿæˆæ•°æ® -->
                  </tbody>
                </table>
              </div>
              
              <!-- åˆ†é¡µå™¨ -->
              <div style="padding: var(--spacing-lg); border-top: 1px solid var(--gray-200); background: var(--bg-secondary);">
                <div style="display: flex; align-items: center; justify-content: space-between;">
                  <div style="color: var(--gray-600);" id="pagination-info">
                    æ˜¾ç¤º 1-10 æ¡ï¼Œå…± 18 æ¡è®°å½•
                  </div>
                  <div style="display: flex; align-items: center; gap: var(--spacing-sm);">
                    <button class="btn btn-secondary" id="prev-btn" onclick="changePage(-1)">ä¸Šä¸€é¡µ</button>
                    <div style="display: flex; gap: var(--spacing-xs);" id="page-numbers">
                      <!-- åŠ¨æ€ç”Ÿæˆé¡µç  -->
                    </div>
                    <button class="btn btn-secondary" id="next-btn" onclick="changePage(1)">ä¸‹ä¸€é¡µ</button>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- é¢„è­¦ä¸­å¿ƒé¡µé¢ -->
        <div id="alerts-content" class="content-page">
          <div class="page-header">
            <h1 class="page-title">é¢„è­¦ä¸­å¿ƒ</h1>
            <div class="page-actions">
              <button class="btn btn-primary">å¯¼å‡ºæ•°æ®</button>
            </div>
          </div>
          
          <!-- ç­›é€‰æ  -->
          <div class="filters-bar">
            <div class="filters-left">
              <div class="filter-group">
                <label>æ¥æ”¶æ—¶é—´èŒƒå›´</label>
                <div style="display: flex; gap: var(--spacing-sm);">
                  <input type="date" class="form-input" id="filter-receive-start" style="width: 140px;">
                  <span style="line-height: 2.5; color: var(--gray-500);">è‡³</span>
                  <input type="date" class="form-input" id="filter-receive-end" style="width: 140px;">
                </div>
              </div>
              
              <div class="filter-group">
                <label>äº‰è®®ç±»å‹</label>
                <select class="form-select" id="filter-dispute-type">
                  <option value="">å…¨éƒ¨ç±»å‹</option>
                  <option value="fraud">fraud</option>
                  <option value="dispute">dispute</option>
                </select>
              </div>
            </div>
            
            <div class="filters-right">
              <button class="btn btn-secondary" onclick="resetAlertFilters()">é‡ç½®</button>
              <button class="btn btn-primary" onclick="applyAlertFilters()">æœç´¢</button>
            </div>
          </div>
          
          <!-- é¢„è­¦åˆ—è¡¨ -->
          <div class="card">
            <div style="overflow-x: auto;">
              <table class="data-table">
                <thead>
                  <tr>
                    <th>æ¥æ”¶æ—¶é—´</th>
                    <th>äº‰è®®ç±»å‹</th>
                    <th>é¢„è­¦æ¥æº</th>
                    <th>äº¤æ˜“é‡‘é¢</th>
                    <th>æè¿°</th>
                    <th>å¤„ç†çŠ¶æ€</th>
                    <th>æ“ä½œ</th>
                  </tr>
                </thead>
                <tbody id="alerts-table-body">
                  <!-- åŠ¨æ€ç”Ÿæˆæ•°æ® -->
                </tbody>
              </table>
            </div>
            
            <!-- åˆ†é¡µå™¨ -->
            <div style="padding: var(--spacing-lg); border-top: 1px solid var(--gray-200); background: var(--bg-secondary);">
              <div style="display: flex; align-items: center; justify-content: space-between;">
                <div style="color: var(--gray-600);" id="alerts-pagination-info">
                  æ˜¾ç¤º 1-10 æ¡ï¼Œå…± 20 æ¡è®°å½•
                </div>
                <div style="display: flex; align-items: center; gap: var(--spacing-sm);">
                  <button class="btn btn-secondary" id="alerts-prev-btn" onclick="changeAlertsPage(-1)">ä¸Šä¸€é¡µ</button>
                  <div style="display: flex; gap: var(--spacing-xs);" id="alerts-page-numbers">
                    <!-- åŠ¨æ€ç”Ÿæˆé¡µç  -->
                  </div>
                  <button class="btn btn-secondary" id="alerts-next-btn" onclick="changeAlertsPage(1)">ä¸‹ä¸€é¡µ</button>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- é¢„è­¦è¯¦æƒ…é¡µé¢ -->
        <div id="alert-detail-content" class="content-page">
          <div class="breadcrumb">
            <a href="#" onclick="showPage('alerts')">é¢„è­¦ä¸­å¿ƒ</a>
            <span class="breadcrumb-separator">/</span>
            <span class="breadcrumb-current">é¢„è­¦è¯¦æƒ…</span>
          </div>
          
          <!-- åŸºç¡€ä¿¡æ¯ -->
          <div class="alert-summary">
            <div class="alert-header">
              <div class="alert-title">
                <h1>åŸºç¡€ä¿¡æ¯</h1>
                <span style="font-family: var(--font-family-number); font-size: var(--font-size-large); color: var(--gray-500); font-weight: 500;" id="detail-alert-id">CHB_20241201_001</span>
              </div>
              <div style="display: flex; gap: var(--spacing-sm); align-items: center;">
                <span class="badge" id="detail-dispute-type">éæˆæƒäº¤æ˜“</span>
                <span class="badge badge-warning" id="detail-status">å¾…å¤„ç†</span>
              </div>
            </div>
            
            <div class="alert-meta">
              <div class="meta-item">
                <span class="meta-label">æ¥æ”¶æ—¶é—´</span>
                <span class="meta-value" id="detail-receive-time">2024-12-01 14:30:25</span>
              </div>
              <div class="meta-item">
                <span class="meta-label">é¢„è­¦æ—¶é—´</span>
                <span class="meta-value" id="detail-alert-time">2024-12-01 14:28:10</span>
              </div>
              <div class="meta-item">
                <span class="meta-label">é¢„è­¦ID</span>
                <span class="meta-value" id="detail-alert-id-copy">CHB_20241201_001</span>
              </div>
              <div class="meta-item">
                <span class="meta-label">äº‰è®®ç±»å‹</span>
                <span class="meta-value" id="detail-dispute-type-copy">éæˆæƒäº¤æ˜“</span>
              </div>
              <div class="meta-item">
                <span class="meta-label">é¢„è­¦æ¥æº</span>
                <span class="meta-value" id="detail-source">Vå¡</span>
              </div>
              <div class="meta-item">
                <span class="meta-label">äº¤æ˜“é‡‘é¢</span>
                <span class="meta-value" id="detail-amount">$1,250.00 USD</span>
              </div>
              <div class="meta-item">
                <span class="meta-label">æè¿°æ‘˜è¦</span>
                <span class="meta-value" id="detail-description">å®¢æˆ·å£°ç§°æœªè¿›è¡Œæ­¤ç¬”äº¤æ˜“</span>
              </div>
            </div>
          </div>
          
          <!-- æ›´å¤šä¿¡æ¯ -->
          <div class="card">
            <div class="card-header">
              <h3 class="card-title">æ›´å¤šä¿¡æ¯</h3>
            </div>
            <div class="card-body">
              <!-- Vå¡ä¿¡æ¯ -->
              <div id="visa-details" style="display: none;">
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: var(--spacing-lg);">
                  <div class="meta-item">
                    <span class="meta-label">å¡BIN</span>
                    <span class="meta-value" id="visa-bin">418756</span>
                  </div>
                  <div class="meta-item">
                    <span class="meta-label">CAID</span>
                    <span class="meta-value" id="visa-caid">CA001234</span>
                  </div>
                  <div class="meta-item">
                    <span class="meta-label">å¡å·</span>
                    <span class="meta-value" id="visa-card-number">****1234</span>
                  </div>
                  <div class="meta-item">
                    <span class="meta-label">æ”¶å•é“¶è¡ŒBIN</span>
                    <span class="meta-value" id="visa-acquirer-bin">123456</span>
                  </div>
                  <div class="meta-item">
                    <span class="meta-label">æ”¶å•é“¶è¡Œå‚è€ƒå·</span>
                    <span class="meta-value" id="visa-acquirer-ref">REF123456789</span>
                  </div>
                  <div class="meta-item">
                    <span class="meta-label">æˆæƒç </span>
                    <span class="meta-value" id="visa-auth-code">AUTH123</span>
                  </div>
                  <div class="meta-item">
                    <span class="meta-label">æ‹’ä»˜åŸå› ä»£ç </span>
                    <span class="meta-value" id="visa-reason-code">10.4</span>
                  </div>
                  <div class="meta-item">
                    <span class="meta-label">æè¿°è”ç³»äºº</span>
                    <span class="meta-value" id="visa-contact">John Smith</span>
                  </div>
                  <div class="meta-item">
                    <span class="meta-label">äº‰è®®é‡‘é¢</span>
                    <span class="meta-value" id="visa-dispute-amount">$1,250.00</span>
                  </div>
                  <div class="meta-item">
                    <span class="meta-label">å•†æˆ·ç±»åˆ«ä»£ç </span>
                    <span class="meta-value" id="visa-mcc">5411</span>
                  </div>
                  <div class="meta-item">
                    <span class="meta-label">è§„åˆ™åç§°</span>
                    <span class="meta-value" id="visa-rule-name">éæˆæƒäº¤æ˜“è§„åˆ™</span>
                  </div>
                  <div class="meta-item">
                    <span class="meta-label">è§„åˆ™ç±»å‹</span>
                    <span class="meta-value" id="visa-rule-type">é˜²æ¬ºè¯ˆ</span>
                  </div>
                  <div class="meta-item">
                    <span class="meta-label">äº¤æ˜“æ—¥æœŸ</span>
                    <span class="meta-value" id="visa-transaction-date">2024-11-30</span>
                  </div>
                </div>
              </div>
              
              <!-- Må¡ä¿¡æ¯ -->
              <div id="mastercard-details" style="display: none;">
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: var(--spacing-lg);">
                  <div class="meta-item">
                    <span class="meta-label">ARN</span>
                    <span class="meta-value" id="mc-arn">12345678901234567890123</span>
                  </div>
                  <div class="meta-item">
                    <span class="meta-label">æˆæƒç </span>
                    <span class="meta-value" id="mc-auth-code">AUTH456</span>
                  </div>
                  <div class="meta-item">
                    <span class="meta-label">å¡BIN</span>
                    <span class="meta-value" id="mc-bin">512345</span>
                  </div>
                  <div class="meta-item">
                    <span class="meta-label">å¡å·</span>
                    <span class="meta-value" id="mc-card-number">****5678</span>
                  </div>
                  <div class="meta-item">
                    <span class="meta-label">æ‹’ä»˜åŸå› ä»£ç </span>
                    <span class="meta-value" id="mc-reason-code">4837</span>
                  </div>
                  <div class="meta-item">
                    <span class="meta-label">äº‰è®®é‡‘é¢</span>
                    <span class="meta-value" id="mc-dispute-amount">$850.00</span>
                  </div>
                  <div class="meta-item">
                    <span class="meta-label">Initiated By</span>
                    <span class="meta-value" id="mc-initiated-by">æŒå¡äºº</span>
                  </div>
                  <div class="meta-item">
                    <span class="meta-label">å‘å¡æœºæ„åç§°</span>
                    <span class="meta-value" id="mc-issuer-name">æ‹›å•†é“¶è¡Œ</span>
                  </div>
                  <div class="meta-item">
                    <span class="meta-label">æ˜¯å¦3Dè´£ä»»æ–¹</span>
                    <span class="meta-value" id="mc-3d-liability">å¦</span>
                  </div>
                  <div class="meta-item">
                    <span class="meta-label">å•†æˆ·ç±»åˆ«ä»£ç </span>
                    <span class="meta-value" id="mc-mcc">5999</span>
                  </div>
                  <div class="meta-item">
                    <span class="meta-label">äº¤æ˜“ID</span>
                    <span class="meta-value" id="mc-transaction-id">TXN_987654322</span>
                  </div>
                  <div class="meta-item">
                    <span class="meta-label">äº¤æ˜“æ—¶é—´</span>
                    <span class="meta-value" id="mc-transaction-time">2024-11-30 15:30:20</span>
                  </div>
                  <div class="meta-item">
                    <span class="meta-label">äº¤æ˜“ç±»å‹</span>
                    <span class="meta-value" id="mc-transaction-type">åœ¨çº¿æ”¯ä»˜</span>
                  </div>
                </div>
              </div>
            </div>
          </div>
          
          <!-- åé¦ˆæ¨¡å—ï¼ˆä»…Må¡æ˜¾ç¤ºï¼‰ -->
          <div class="card" id="feedback-section" style="display: none;">
            <div class="card-header">
              <h3 class="card-title">åé¦ˆ</h3>
            </div>
            <div class="card-body">
              <form onsubmit="handleAlertFeedback(event)" id="feedback-form">
                <div class="form-field">
                  <label class="form-label">åé¦ˆç»“æœ *</label>
                  <select class="form-select" name="feedback-result" required>
                    <option value="stopped" selected>stopped</option>
                    <option value="partially_stopped">partially_stopped</option>
                    <option value="previously_cancelled">previously_cancelled</option>
                    <option value="missed">missed</option>
                    <option value="notfound">notfound</option>
                    <option value="account_suspended">account_suspended</option>
                    <option value="shipper_contacted">shipper_contacted</option>
                    <option value="other">other</option>
                  </select>
                </div>

                <div class="form-field">
                  <label class="form-label">é€€æ¬¾çŠ¶æ€ *</label>
                  <div style="display: flex; gap: var(--spacing-md);">
                    <label style="display: flex; align-items: center; gap: var(--spacing-sm); cursor: pointer;">
                      <input type="radio" name="refund-status" value="refunded" checked onchange="toggleRefundFields(this.value)">
                      <span>å·²é€€æ¬¾ (refunded)</span>
                    </label>
                    <label style="display: flex; align-items: center; gap: var(--spacing-sm); cursor: pointer;">
                      <input type="radio" name="refund-status" value="not_refunded" onchange="toggleRefundFields(this.value)">
                      <span>æœªé€€æ¬¾ (not_refunded)</span>
                    </label>
                  </div>
                </div>

                <div class="form-field">
                  <label class="form-label">æ˜¯å¦æ¬ºè¯ˆ</label>
                  <div style="display: flex; gap: var(--spacing-md);">
                    <label style="display: flex; align-items: center; gap: var(--spacing-sm); cursor: pointer;">
                      <input type="radio" name="is-fraud" value="true">
                      <span>æ˜¯</span>
                    </label>
                    <label style="display: flex; align-items: center; gap: var(--spacing-sm); cursor: pointer;">
                      <input type="radio" name="is-fraud" value="false">
                      <span>å¦</span>
                    </label>
                  </div>
                </div>

                <div class="form-field">
                  <label class="form-label">è¡¥å……æ„è§</label>
                  <textarea class="form-textarea" name="additional-comment" placeholder="è¯·è¾“å…¥è¡¥å……æ„è§..." rows="3" maxlength="50"></textarea>
                  <small style="color: var(--gray-500);">æœ€å¤š50ä¸ªå­—ç¬¦</small>
                </div>

                <div class="form-field">
                  <label class="form-label">åŒ¹é…çš„æµæ°´å•å·</label>
                  <input type="text" class="form-input" name="transaction-ref" placeholder="è¯·è¾“å…¥æµæ°´å•å·" maxlength="50">
                  <small style="color: var(--gray-500);">æœ€å¤š50ä¸ªå­—ç¬¦</small>
                </div>

                <!-- é€€æ¬¾ç›¸å…³å­—æ®µ -->
                <div id="refund-fields">
                  <div class="form-field">
                    <label class="form-label">é€€æ¬¾å•å· *</label>
                    <input type="text" class="form-input" name="refund-id" placeholder="è¯·è¾“å…¥é€€æ¬¾å•å·" required>
                  </div>

                  <div class="form-field">
                    <label class="form-label">é€€æ¬¾æ—¥æœŸ *</label>
                    <input type="datetime-local" class="form-input" name="refund-date" required>
                  </div>

                  <div class="form-field">
                    <label class="form-label">é€€æ¬¾å¸ç§ *</label>
                    <select class="form-select" name="refund-currency" required>
                      <option value="">è¯·é€‰æ‹©å¸ç§</option>
                      <option value="USD">USD - ç¾å…ƒ</option>
                      <option value="EUR">EUR - æ¬§å…ƒ</option>
                      <option value="CNY">CNY - äººæ°‘å¸</option>
                      <option value="GBP">GBP - è‹±é•‘</option>
                      <option value="JPY">JPY - æ—¥å…ƒ</option>
                      <option value="AUD">AUD - æ¾³å…ƒ</option>
                      <option value="CAD">CAD - åŠ å…ƒ</option>
                      <option value="CHF">CHF - ç‘å£«æ³•éƒ</option>
                      <option value="HKD">HKD - æ¸¯å¸</option>
                      <option value="SGD">SGD - æ–°åŠ å¡å…ƒ</option>
                    </select>
                  </div>

                  <div class="form-field">
                    <label class="form-label">é€€æ¬¾é‡‘é¢ *</label>
                    <input type="number" class="form-input" name="refund-amount" placeholder="è¯·è¾“å…¥é€€æ¬¾é‡‘é¢" step="0.01" min="0" required>
                    <small style="color: var(--gray-500);">ä¿ç•™ä¸¤ä½å°æ•°</small>
                  </div>
                </div>
                
                <div style="display: flex; gap: var(--spacing-sm); justify-content: flex-end; padding-top: var(--spacing-lg); border-top: 1px solid var(--gray-200);">
                  <button type="button" class="btn btn-secondary" onclick="showPage('alerts')">è¿”å›</button>
                  <button type="submit" class="btn btn-primary">æäº¤åé¦ˆ</button>
                </div>
              </form>
            </div>
          </div>
        </div>
      </main>
    </div>
  </div>

  <!-- æ·»åŠ å¡ç‰‡å¼¹çª— -->
  <div id="add-card-modal" class="modal">
    <div class="modal-content">
      <div class="card-header">
        <h3 class="card-title">æ·»åŠ æˆæƒå¡ç‰‡</h3>
        <button class="btn btn-text" onclick="hideAddCardModal()">âœ•</button>
      </div>
      <div class="card-body">
        <form class="card-form" onsubmit="handleAddCard(event)">
          <div class="form-field">
            <label class="form-label">å•†æˆ·æè¿°ç¬¦ *</label>
            <input type="text" class="form-input" placeholder="è¯·è¾“å…¥æè¿°ç¬¦" required id="descriptor-input">
            <small style="color: var(--gray-500);">ç”¨äºæ‹’ä»˜é€šè¯†åˆ«çš„å•†æˆ·æ ‡è¯†</small>
          </div>
          
          <div class="form-field">
            <label class="form-label">å¡ç‰‡BIN *</label>
            <input type="text" class="form-input" placeholder="è¯·è¾“å…¥6-8ä½å¡ç‰‡BIN" pattern="[0-9]{6,8}" required id="bin-input" oninput="checkCardType(this.value)">
            <small style="color: var(--gray-500);">é“¶è¡Œå¡å·å‰6-8ä½</small>
          </div>
          
          <div class="form-field" id="caid-field" style="display: none;">
            <label class="form-label">CAID *</label>
            <input type="text" class="form-input" placeholder="è¯·è¾“å…¥CAID" id="caid-input">
            <small style="color: var(--gray-500);">Visaå¡å¿…å¡«é¡¹</small>
          </div>
          
          <div class="form-field">
            <label class="form-label">é€šçŸ¥é‚®ç®± *</label>
            <input type="email" class="form-input" placeholder="æ¥æ”¶é¢„è­¦é€šçŸ¥çš„é‚®ç®±" required id="email-input">
          </div>
          
          <div style="display: flex; gap: var(--spacing-sm); justify-content: flex-end;">
            <button type="button" class="btn btn-secondary" onclick="hideAddCardModal()">å–æ¶ˆ</button>
            <button type="submit" class="btn btn-primary">æäº¤æŠ¥å¤‡</button>
          </div>
        </form>
      </div>
    </div>
  </div>

  <script>
    // æ¨¡æ‹Ÿå¡ç‰‡æ•°æ®
    let cardsData = [
      { id: 1, descriptor: 'ABC-STORE', bin: '418756', caid: 'CA001', cardType: 'V', status: 'å·²æŠ¥å¤‡', createTime: '2024-12-01 14:30:25', email: 'alert@abc.com' },
      { id: 2, descriptor: 'XYZ-SHOP', bin: '512345', caid: '-', cardType: 'M', status: 'æŠ¥å¤‡ä¸­', createTime: '2024-12-01 13:15:10', email: 'notify@xyz.com' },
      { id: 3, descriptor: 'BEST-MALL', bin: '456789', caid: 'CA002', cardType: 'V', status: 'å·²æŠ¥å¤‡', createTime: '2024-11-30 16:45:30', email: 'alerts@best.com' },
      { id: 4, descriptor: 'TECH-STORE', bin: '378901', caid: '-', cardType: 'M', status: 'å·²å…³é—­', createTime: '2024-11-30 11:20:15', email: 'tech@store.com' },
      { id: 5, descriptor: 'GAME-WORLD', bin: '123456', caid: 'CA003', cardType: 'V', status: 'å·²æŠ¥å¤‡', createTime: '2024-11-29 09:30:45', email: 'game@world.com' },
      { id: 6, descriptor: 'FOOD-HUB', bin: '987654', caid: 'CA004', cardType: 'V', status: 'æŠ¥å¤‡ä¸­', createTime: '2024-11-29 08:15:20', email: 'food@hub.com' },
      { id: 7, descriptor: 'BOOK-STORE', bin: '345678', caid: '-', cardType: 'M', status: 'å·²æŠ¥å¤‡', createTime: '2024-11-28 15:40:10', email: 'book@store.com' },
      { id: 8, descriptor: 'AUTO-PARTS', bin: '567890', caid: 'CA005', cardType: 'V', status: 'å·²å…³é—­', createTime: '2024-11-28 12:25:35', email: 'auto@parts.com' },
      { id: 9, descriptor: 'MUSIC-SHOP', bin: '234567', caid: 'CA006', cardType: 'V', status: 'å·²æŠ¥å¤‡', createTime: '2024-11-27 17:10:50', email: 'music@shop.com' },
      { id: 10, descriptor: 'SPORT-GEAR', bin: '876543', caid: 'CA007', cardType: 'V', status: 'æŠ¥å¤‡ä¸­', createTime: '2024-11-27 14:55:25', email: 'sport@gear.com' },
      { id: 11, descriptor: 'HOME-DECO', bin: '456123', caid: 'CA008', cardType: 'V', status: 'å·²æŠ¥å¤‡', createTime: '2024-11-26 10:30:15', email: 'home@deco.com' },
      { id: 12, descriptor: 'PET-CARE', bin: '789012', caid: 'CA009', cardType: 'V', status: 'å·²å…³é—­', createTime: '2024-11-26 08:45:40', email: 'pet@care.com' },
      { id: 13, descriptor: 'HEALTH-PLUS', bin: '135791', caid: '-', cardType: 'M', status: 'å·²æŠ¥å¤‡', createTime: '2024-11-25 16:20:30', email: 'health@plus.com' },
      { id: 14, descriptor: 'BEAUTY-SPA', bin: '246802', caid: 'CA010', cardType: 'V', status: 'æŠ¥å¤‡ä¸­', createTime: '2024-11-25 13:35:55', email: 'beauty@spa.com' },
      { id: 15, descriptor: 'TRAVEL-GO', bin: '357913', caid: '-', cardType: 'M', status: 'å·²æŠ¥å¤‡', createTime: '2024-11-24 11:15:20', email: 'travel@go.com' },
      { id: 16, descriptor: 'KIDS-TOYS', bin: '468024', caid: 'CA011', cardType: 'V', status: 'å·²å…³é—­', createTime: '2024-11-24 09:50:45', email: 'kids@toys.com' },
      { id: 17, descriptor: 'OFFICE-SUPPLY', bin: '579135', caid: '-', cardType: 'M', status: 'å·²æŠ¥å¤‡', createTime: '2024-11-23 15:25:10', email: 'office@supply.com' },
      { id: 18, descriptor: 'GARDEN-CENTER', bin: '680246', caid: 'CA012', cardType: 'V', status: 'æŠ¥å¤‡ä¸­', createTime: '2024-11-23 12:40:35', email: 'garden@center.com' }
    ];

    let filteredData = [...cardsData];
    let currentPage = 1;
    let itemsPerPage = 10;

    // æ¨¡æ‹Ÿé¢„è­¦æ•°æ®
    let alertsData = [
      {
        id: 1,
        alertId: 'CHB_20241201_001',
        receiveTime: '2024-12-01 14:30:25',
        alertTime: '2024-12-01 14:28:10',
        disputeType: 'fraud',
        source: 'Vå¡',
        amount: '1250.00 USD',
        description: 'å®¢æˆ·å£°ç§°æœªè¿›è¡Œæ­¤ç¬”äº¤æ˜“',
        status: 'å¾…å¤„ç†',
        // Vå¡ç‰¹æœ‰å­—æ®µ
        cardBin: '418756',
        caid: 'CA001234',
        cardNumber: '****1234',
        acquirerBin: '123456',
        acquirerRef: 'REF123456789',
        authCode: 'AUTH123',
        reasonCode: '10.4',
        contact: 'John Smith',
        disputeAmount: '1250.00 USD',
        mcc: '5411',
        ruleName: 'éæˆæƒäº¤æ˜“è§„åˆ™',
        ruleType: 'é˜²æ¬ºè¯ˆ',
        transactionDate: '2024-11-30'
      },
      {
        id: 2,
        alertId: 'CHB_20241201_002',
        receiveTime: '2024-12-01 13:45:10',
        alertTime: '2024-12-01 13:42:55',
        disputeType: 'dispute',
        source: 'Må¡',
        amount: '850.00 USD',
        description: 'å‘ç°é‡å¤çš„äº¤æ˜“å¤„ç†',
        status: 'å¤„ç†ä¸­',
        // Må¡ç‰¹æœ‰å­—æ®µ
        arn: '12345678901234567890123',
        authCode: 'AUTH456',
        cardBin: '512345',
        cardNumber: '****5678',
        reasonCode: '4837',
        disputeAmount: '850.00 USD',
        initiatedBy: 'æŒå¡äºº',
        issuerName: 'æ‹›å•†é“¶è¡Œ',
        liability3D: 'å¦',
        mcc: '5999',
        transactionId: 'TXN_987654322',
        transactionTime: '2024-11-30 15:30:20',
        transactionType: 'åœ¨çº¿æ”¯ä»˜'
      },
      {
        id: 3,
        alertId: 'CHB_20241130_003',
        receiveTime: '2024-11-30 16:20:30',
        alertTime: '2024-11-30 16:18:45',
        disputeType: 'dispute',
        source: 'Vå¡',
        amount: '320.00 USD',
        description: 'å®¢æˆ·å¯¹å•†å“è´¨é‡æœ‰å¼‚è®®',
        status: 'å·²å¤„ç†',
        cardBin: '456789',
        caid: 'CA005678',
        cardNumber: '****9876',
        acquirerBin: '654321',
        acquirerRef: 'REF987654321',
        authCode: 'AUTH789',
        reasonCode: '13.1',
        contact: 'Alice Johnson',
        disputeAmount: '320.00 USD',
        mcc: '5732',
        ruleName: 'å•†å“è´¨é‡è§„åˆ™',
        ruleType: 'æ¶ˆè´¹è€…ä¿æŠ¤',
        transactionDate: '2024-11-28'
      },
      {
        id: 4,
        alertId: 'CHB_20241130_004',
        receiveTime: '2024-11-30 11:15:20',
        alertTime: '2024-11-30 11:12:35',
        disputeType: 'fraud',
        source: 'Må¡',
        amount: '1500.00 USD',
        description: 'äº¤æ˜“å¤„ç†è¿‡ç¨‹ä¸­å‡ºç°é”™è¯¯',
        status: 'å·²æ‹’ç»',
        arn: '98765432109876543210987',
        authCode: 'AUTH321',
        cardBin: '378901',
        cardNumber: '****4321',
        reasonCode: '4855',
        disputeAmount: '1500.00 USD',
        initiatedBy: 'å•†æˆ·',
        issuerName: 'å·¥å•†é“¶è¡Œ',
        liability3D: 'æ˜¯',
        mcc: '5812',
        transactionId: 'TXN_456789123',
        transactionTime: '2024-11-29 10:45:15',
        transactionType: 'ç§»åŠ¨æ”¯ä»˜'
      },
      {
        id: 5,
        alertId: 'CHB_20241129_005',
        receiveTime: '2024-11-29 09:30:45',
        alertTime: '2024-11-29 09:28:20',
        disputeType: 'fraud',
        source: 'Vå¡',
        amount: '2100.00 USD',
        description: 'ç–‘ä¼¼æ¬ºè¯ˆæ€§äº¤æ˜“æ´»åŠ¨',
        status: 'å¾…å¤„ç†',
        cardBin: '123456',
        caid: 'CA009876',
        cardNumber: '****5555',
        acquirerBin: '789012',
        acquirerRef: 'REF555666777',
        authCode: 'AUTH555',
        reasonCode: '10.5',
        contact: 'Bob Wilson',
        disputeAmount: '2100.00 USD',
        mcc: '5499',
        ruleName: 'æ¬ºè¯ˆæ£€æµ‹è§„åˆ™',
        ruleType: 'é£é™©æ§åˆ¶',
        transactionDate: '2024-11-27'
      }
    ];

    let filteredAlertsData = [...alertsData];
    let currentAlertsPage = 1;
    let alertsPerPage = 10;

    // é¡µé¢åˆ‡æ¢åŠŸèƒ½
    function showPage(pageId) {
      // éšè—æ‰€æœ‰å†…å®¹é¡µé¢
      const contentPages = document.querySelectorAll('.content-page');
      contentPages.forEach(page => {
        page.classList.remove('active');
        page.style.display = 'none';
      });
      
      // æ˜¾ç¤ºç›®æ ‡é¡µé¢
      const targetPage = document.getElementById(pageId + '-content');
      if (targetPage) {
        targetPage.classList.add('active');
        targetPage.style.display = 'block';
        targetPage.classList.add('fade-in');
      }
      
      // æ›´æ–°å¯¼èˆªçŠ¶æ€
      const navItems = document.querySelectorAll('.nav-item');
      navItems.forEach(item => {
        item.classList.remove('active');
      });
      
      // æ ¹æ®é¡µé¢IDè®¾ç½®å¯¹åº”çš„å¯¼èˆªé¡¹ä¸ºæ´»è·ƒçŠ¶æ€
      const navMap = {
        'cards': 0,
        'alerts': 1,
        'alert-detail': 1
      };
      
      const activeIndex = navMap[pageId];
      if (activeIndex !== undefined) {
        navItems[activeIndex].classList.add('active');
      }
    }

    // ç™»å½•å¤„ç†
    function handleLogin(event) {
      event.preventDefault();
      
      const email = event.target.querySelector('input[type="email"]').value.trim();
      const password = event.target.querySelector('input[type="password"]').value;
      
      // é‚®ç®±éªŒè¯
      if (!email) {
        alert('è¯·è¾“å…¥é‚®ç®±');
        return;
      }
      
      // å¯†ç éªŒè¯
      if (!password) {
        alert('è¯·è¾“å…¥å¯†ç ');
        return;
      }
      
      // æ¨¡æ‹Ÿæ•°æ®åº“éªŒè¯
      const validEmails = ['admin@example.com', 'merchant@abc.com', 'test@test.com'];
      const validCredentials = {
        'admin@example.com': '123456',
        'merchant@abc.com': 'password',
        'test@test.com': '123456'
      };
      
      // æ£€æŸ¥é‚®ç®±æ˜¯å¦å­˜åœ¨
      if (!validEmails.includes(email)) {
        alert('é‚®ç®±ä¸å­˜åœ¨');
        return;
      }
      
      // æ£€æŸ¥å¯†ç æ˜¯å¦æ­£ç¡®
      if (validCredentials[email] !== password) {
        alert('å¯†ç é”™è¯¯');
        return;
      }
      
      // ç™»å½•æˆåŠŸ
      document.getElementById('login-page').classList.remove('active');
      document.getElementById('app-page').classList.add('active');
      
      showPage('cards');
      document.getElementById('app-page').classList.add('fade-in');
    }

    // é€€å‡ºç™»å½•
    function handleLogout() {
      if (confirm('ç¡®å®šè¦é€€å‡ºç™»å½•å—ï¼Ÿ')) {
        document.getElementById('app-page').classList.remove('active');
        document.getElementById('login-page').classList.add('active');
        
        const loginForm = document.querySelector('.login-form');
        loginForm.reset();
      }
    }

    // æ˜¾ç¤ºæ·»åŠ å¡ç‰‡å¼¹çª—
    function showAddCardModal() {
      document.getElementById('add-card-modal').classList.add('active');
      document.body.style.overflow = 'hidden';
    }

    // éšè—æ·»åŠ å¡ç‰‡å¼¹çª—
    function hideAddCardModal() {
      document.getElementById('add-card-modal').classList.remove('active');
      document.body.style.overflow = 'auto';
      
      // é‡ç½®è¡¨å•
      const form = document.querySelector('#add-card-modal form');
      form.reset();
      document.getElementById('caid-field').style.display = 'none';
      document.getElementById('caid-input').required = false;
    }

    // æ£€æŸ¥å¡ç±»å‹
    function checkCardType(bin) {
      const caidField = document.getElementById('caid-field');
      const caidInput = document.getElementById('caid-input');
      
      if (bin.length >= 6) {
        const sixthDigit = parseInt(bin.charAt(5));
        
        if (sixthDigit % 2 === 0) {
          // åŒæ•°æ˜¯Vå¡ï¼Œéœ€è¦CAID
          caidField.style.display = 'block';
          caidInput.required = true;
        } else {
          // å•æ•°æ˜¯Må¡ï¼Œä¸éœ€è¦CAID
          caidField.style.display = 'none';
          caidInput.required = false;
          caidInput.value = '';
        }
      } else {
        caidField.style.display = 'none';
        caidInput.required = false;
      }
    }

    // å¤„ç†æ·»åŠ å¡ç‰‡
    function handleAddCard(event) {
      event.preventDefault();
      
      const descriptor = document.getElementById('descriptor-input').value.trim();
      const bin = document.getElementById('bin-input').value.trim();
      const caid = document.getElementById('caid-input').value.trim();
      const email = document.getElementById('email-input').value.trim();
      
      if (!descriptor) {
        alert('è¯·å¡«å†™å•†æˆ·æè¿°ç¬¦');
        return;
      }
      
      if (!bin) {
        alert('è¯·å¡«å†™å¡ç‰‡BIN');
        return;
      }
      
      if (!email) {
        alert('è¯·å¡«å†™é€šçŸ¥é‚®ç®±');
        return;
      }
      
      // æ£€æŸ¥æ˜¯å¦æ˜¯Vå¡ä¸”éœ€è¦CAID
      const sixthDigit = parseInt(bin.charAt(5));
      if (sixthDigit % 2 === 0 && !caid) {
        alert('Visaå¡éœ€è¦å¡«å†™CAID');
        return;
      }
      
      // æ·»åŠ æ–°å¡ç‰‡
      const newCard = {
        id: cardsData.length + 1,
        descriptor: descriptor,
        bin: bin,
        caid: sixthDigit % 2 === 0 ? caid : '-',
        cardType: sixthDigit % 2 === 0 ? 'V' : 'M',
        status: 'æŠ¥å¤‡ä¸­',
        createTime: new Date().toLocaleString('zh-CN', {
          year: 'numeric',
          month: '2-digit',
          day: '2-digit',
          hour: '2-digit',
          minute: '2-digit',
          second: '2-digit'
        }).replace(/\//g, '-'),
        email: email
      };
      
      cardsData.unshift(newCard); // æ·»åŠ åˆ°æ•°ç»„å¼€å¤´
      filteredData = [...cardsData];
      
      alert('å¡ç‰‡æŠ¥å¤‡æäº¤æˆåŠŸï¼');
      hideAddCardModal();
      renderTable();
      updatePagination();
    }

    // æ¸²æŸ“è¡¨æ ¼
    function renderTable() {
      const tbody = document.getElementById('cards-table-body');
      const startIndex = (currentPage - 1) * itemsPerPage;
      const endIndex = startIndex + itemsPerPage;
      const currentData = filteredData.slice(startIndex, endIndex);
      
      tbody.innerHTML = currentData.map(card => `
        <tr class="table-row">
          <td>${card.descriptor}</td>
          <td style="font-family: var(--font-family-number);">${card.bin}</td>
          <td>${card.caid}</td>
          <td>
            <span class="badge ${getStatusClass(card.status)}">${card.status}</span>
          </td>
          <td>${card.createTime}</td>
          <td>
            ${card.status === 'å·²æŠ¥å¤‡' ? 
              `<button class="btn btn-text" style="color: var(--danger);" onclick="closeCard(${card.id})">å…³é—­</button>` :
              '<span style="color: var(--gray-400);">-</span>'
            }
          </td>
        </tr>
      `).join('');
    }

    // è·å–çŠ¶æ€æ ·å¼ç±»
    function getStatusClass(status) {
      switch(status) {
        case 'å·²æŠ¥å¤‡': return 'badge-success';
        case 'æŠ¥å¤‡ä¸­': return 'badge-warning';
        case 'å·²å…³é—­': return 'badge-danger';
        default: return 'badge-secondary';
      }
    }

    // å…³é—­å¡ç‰‡
    function closeCard(cardId) {
      if (confirm('ç¡®å®šè¦å…³é—­è¿™å¼ å¡ç‰‡å—ï¼Ÿ')) {
        const cardIndex = cardsData.findIndex(card => card.id === cardId);
        if (cardIndex !== -1) {
          cardsData[cardIndex].status = 'å·²å…³é—­';
          applyFilters();
          alert('å¡ç‰‡å·²å…³é—­');
        }
      }
    }

    // åº”ç”¨ç­›é€‰
    function applyFilters() {
      const descriptor = document.getElementById('filter-descriptor').value.trim().toLowerCase();
      const dateStart = document.getElementById('filter-date-start').value;
      const dateEnd = document.getElementById('filter-date-end').value;
      const status = document.getElementById('filter-status').value;
      
      filteredData = cardsData.filter(card => {
        let match = true;
        
        if (descriptor && !card.descriptor.toLowerCase().includes(descriptor)) {
          match = false;
        }
        
        if (dateStart) {
          const cardDate = new Date(card.createTime);
          const startDate = new Date(dateStart);
          if (cardDate < startDate) {
            match = false;
          }
        }
        
        if (dateEnd) {
          const cardDate = new Date(card.createTime);
          const endDate = new Date(dateEnd + ' 23:59:59');
          if (cardDate > endDate) {
            match = false;
          }
        }
        
        if (status && card.status !== status) {
          match = false;
        }
        
        return match;
      });
      
      currentPage = 1;
      renderTable();
      updatePagination();
    }

    // é‡ç½®ç­›é€‰
    function resetFilters() {
      document.getElementById('filter-descriptor').value = '';
      document.getElementById('filter-date-start').value = '';
      document.getElementById('filter-date-end').value = '';
      document.getElementById('filter-status').value = '';
      
      filteredData = [...cardsData];
      currentPage = 1;
      renderTable();
      updatePagination();
    }

    // æ›´æ–°åˆ†é¡µ
    function updatePagination() {
      const totalPages = Math.ceil(filteredData.length / itemsPerPage);
      const startIndex = (currentPage - 1) * itemsPerPage;
      const endIndex = Math.min(startIndex + itemsPerPage, filteredData.length);
      
      // æ›´æ–°åˆ†é¡µä¿¡æ¯
      document.getElementById('pagination-info').textContent = 
        `æ˜¾ç¤º ${startIndex + 1}-${endIndex} æ¡ï¼Œå…± ${filteredData.length} æ¡è®°å½•`;
      
      // æ›´æ–°æŒ‰é’®çŠ¶æ€
      document.getElementById('prev-btn').disabled = currentPage === 1;
      document.getElementById('next-btn').disabled = currentPage === totalPages;
      
      // æ›´æ–°é¡µç 
      const pageNumbers = document.getElementById('page-numbers');
      pageNumbers.innerHTML = '';
      
      for (let i = 1; i <= totalPages; i++) {
        const pageBtn = document.createElement('button');
        pageBtn.textContent = i;
        pageBtn.style.cssText = `
          width: 36px; height: 36px; 
          border: 1px solid ${i === currentPage ? 'var(--primary-orange)' : 'var(--gray-200)'}; 
          background: ${i === currentPage ? 'var(--primary-orange)' : 'var(--bg-primary)'}; 
          color: ${i === currentPage ? 'white' : 'inherit'}; 
          border-radius: var(--border-radius-md); 
          cursor: pointer;
        `;
        pageBtn.onclick = () => goToPage(i);
        pageNumbers.appendChild(pageBtn);
      }
    }

    // åˆ‡æ¢é¡µé¢
    function changePage(direction) {
      const totalPages = Math.ceil(filteredData.length / itemsPerPage);
      const newPage = currentPage + direction;
      
      if (newPage >= 1 && newPage <= totalPages) {
        currentPage = newPage;
        renderTable();
        updatePagination();
      }
    }

    // è·³è½¬åˆ°æŒ‡å®šé¡µé¢
    function goToPage(page) {
      currentPage = page;
      renderTable();
      updatePagination();
    }

    // å¤„ç†é¢„è­¦
    function handleProcessAlert(event) {
      event.preventDefault();
      
      const formData = new FormData(event.target);
      const action = formData.get('action');
      const reason = event.target.querySelector('textarea').value;
      
      if (!action) {
        alert('è¯·é€‰æ‹©å¤„ç†åŠ¨ä½œ');
        return;
      }
      
      if (!reason.trim()) {
        alert('è¯·å¡«å†™å¤„ç†åŸå› ');
        return;
      }
      
      alert('é¢„è­¦å¤„ç†æäº¤æˆåŠŸï¼');
      showPage('alerts');
    }

    // ç‚¹å‡»å¼¹çª—å¤–éƒ¨å…³é—­å¼¹çª—
    document.addEventListener('click', function(e) {
      const modal = document.getElementById('add-card-modal');
      if (e.target === modal) {
        hideAddCardModal();
      }
    });

    // ESCé”®å…³é—­å¼¹çª—
    document.addEventListener('keydown', function(e) {
      if (e.key === 'Escape') {
        hideAddCardModal();
      }
    });

    // åˆå§‹åŒ–é¡µé¢
    document.addEventListener('DOMContentLoaded', function() {
      showPage('cards');
      renderTable();
      updatePagination();
      renderAlertsTable();
      updateAlertsPagination();
      
      // æ·»åŠ è¡¨æ ¼è¡Œç‚¹å‡»æ•ˆæœ
      const tableRows = document.querySelectorAll('.table-row');
      tableRows.forEach(row => {
        row.addEventListener('click', function(e) {
          if (e.target.tagName === 'BUTTON' || e.target.closest('button')) {
            return;
          }
          
          tableRows.forEach(r => r.style.backgroundColor = '');
          this.style.backgroundColor = 'var(--primary-orange-pale)';
        });
      });
      
      // æ·»åŠ å¡ç‰‡æ‚¬åœæ•ˆæœ
      const cards = document.querySelectorAll('.card');
      cards.forEach(card => {
        card.addEventListener('mouseenter', function() {
          this.style.transform = 'translateY(-2px)';
          this.style.boxShadow = 'var(--shadow-lg)';
        });
        
        card.addEventListener('mouseleave', function() {
          this.style.transform = 'translateY(0)';
          this.style.boxShadow = 'var(--shadow-sm)';
        });
      });
    });

    // å“åº”å¼å¤„ç†
    function handleResize() {
      const isMobile = window.innerWidth <= 768;
      const sidebar = document.querySelector('.app-sidebar');
      
      if (isMobile) {
        sidebar.style.display = 'none';
      } else {
        sidebar.style.display = 'block';
      }
    }

    window.addEventListener('resize', handleResize);
    window.addEventListener('load', handleResize);

    // é¢„è­¦ç›¸å…³å‡½æ•°
    // æ¸²æŸ“é¢„è­¦è¡¨æ ¼
    function renderAlertsTable() {
      const tbody = document.getElementById('alerts-table-body');
      const startIndex = (currentAlertsPage - 1) * alertsPerPage;
      const endIndex = startIndex + alertsPerPage;
      const currentData = filteredAlertsData.slice(startIndex, endIndex);
      
      tbody.innerHTML = currentData.map(alert => `
        <tr class="table-row">
          <td>${alert.receiveTime}</td>
          <td>
            <span class="badge ${getDisputeTypeClass(alert.disputeType)}">${alert.disputeType}</span>
          </td>
          <td>
            <span class="badge ${alert.source === 'Vå¡' ? 'badge-info' : 'badge-secondary'}">${alert.source}</span>
          </td>
          <td style="font-family: var(--font-family-number);">${alert.amount}</td>
          <td>${alert.description}</td>
          <td>
            <span class="badge ${getAlertStatusClass(alert.status)}">${alert.status}</span>
          </td>
          <td>
            <button class="btn btn-text" onclick="showAlertDetail(${alert.id})">æŸ¥çœ‹è¯¦æƒ…</button>
          </td>
        </tr>
      `).join('');
    }

    // è·å–äº‰è®®ç±»å‹æ ·å¼ç±»
    function getDisputeTypeClass(type) {
      switch(type) {
        case 'fraud': return 'badge-danger';
        case 'dispute': return 'badge-warning';
        default: return 'badge-secondary';
      }
    }

    // è·å–é¢„è­¦çŠ¶æ€æ ·å¼ç±»
    function getAlertStatusClass(status) {
      switch(status) {
        case 'å¾…å¤„ç†': return 'badge-warning';
        case 'å¤„ç†ä¸­': return 'badge-info';
        case 'å·²å¤„ç†': return 'badge-success';
        case 'å·²æ‹’ç»': return 'badge-danger';
        default: return 'badge-secondary';
      }
    }

    // æ˜¾ç¤ºé¢„è­¦è¯¦æƒ…
    function showAlertDetail(alertId) {
      const alert = alertsData.find(item => item.id === alertId);
      if (!alert) return;

      // æ›´æ–°åŸºç¡€ä¿¡æ¯
      document.getElementById('detail-alert-id').textContent = alert.alertId;
      document.getElementById('detail-dispute-type').textContent = alert.disputeType;
      document.getElementById('detail-dispute-type').className = `badge ${getDisputeTypeClass(alert.disputeType)}`;
      document.getElementById('detail-status').textContent = alert.status;
      document.getElementById('detail-status').className = `badge ${getAlertStatusClass(alert.status)}`;
      document.getElementById('detail-receive-time').textContent = alert.receiveTime;
      document.getElementById('detail-alert-time').textContent = alert.alertTime;
      document.getElementById('detail-alert-id-copy').textContent = alert.alertId;
      document.getElementById('detail-dispute-type-copy').textContent = alert.disputeType;
      document.getElementById('detail-source').textContent = alert.source;
      document.getElementById('detail-amount').textContent = alert.amount;
      document.getElementById('detail-description').textContent = alert.description;

      // æ ¹æ®é¢„è­¦æ¥æºæ˜¾ç¤ºä¸åŒçš„è¯¦ç»†ä¿¡æ¯
      const visaDetails = document.getElementById('visa-details');
      const mastercardDetails = document.getElementById('mastercard-details');
      const feedbackSection = document.getElementById('feedback-section');

      if (alert.source === 'Vå¡') {
        // æ˜¾ç¤ºVå¡ä¿¡æ¯
        visaDetails.style.display = 'block';
        mastercardDetails.style.display = 'none';
        feedbackSection.style.display = 'none';

        // å¡«å……Vå¡æ•°æ®
        document.getElementById('visa-bin').textContent = alert.cardBin;
        document.getElementById('visa-caid').textContent = alert.caid;
        document.getElementById('visa-card-number').textContent = alert.cardNumber;
        document.getElementById('visa-acquirer-bin').textContent = alert.acquirerBin;
        document.getElementById('visa-acquirer-ref').textContent = alert.acquirerRef;
        document.getElementById('visa-auth-code').textContent = alert.authCode;
        document.getElementById('visa-reason-code').textContent = alert.reasonCode;
        document.getElementById('visa-contact').textContent = alert.contact;
        document.getElementById('visa-dispute-amount').textContent = alert.disputeAmount;
        document.getElementById('visa-mcc').textContent = alert.mcc;
        document.getElementById('visa-rule-name').textContent = alert.ruleName;
        document.getElementById('visa-rule-type').textContent = alert.ruleType;
        document.getElementById('visa-transaction-date').textContent = alert.transactionDate;
      } else {
        // æ˜¾ç¤ºMå¡ä¿¡æ¯
        visaDetails.style.display = 'none';
        mastercardDetails.style.display = 'block';
        feedbackSection.style.display = 'block';

        // å¡«å……Må¡æ•°æ®
        document.getElementById('mc-arn').textContent = alert.arn;
        document.getElementById('mc-auth-code').textContent = alert.authCode;
        document.getElementById('mc-bin').textContent = alert.cardBin;
        document.getElementById('mc-card-number').textContent = alert.cardNumber;
        document.getElementById('mc-reason-code').textContent = alert.reasonCode;
        document.getElementById('mc-dispute-amount').textContent = alert.disputeAmount;
        document.getElementById('mc-initiated-by').textContent = alert.initiatedBy;
        document.getElementById('mc-issuer-name').textContent = alert.issuerName;
        document.getElementById('mc-3d-liability').textContent = alert.liability3D;
        document.getElementById('mc-mcc').textContent = alert.mcc;
        document.getElementById('mc-transaction-id').textContent = alert.transactionId;
        document.getElementById('mc-transaction-time').textContent = alert.transactionTime;
        document.getElementById('mc-transaction-type').textContent = alert.transactionType;
      }

      showPage('alert-detail');
    }

    // åº”ç”¨é¢„è­¦ç­›é€‰
    function applyAlertFilters() {
      const disputeType = document.getElementById('filter-dispute-type').value;
      const processStatus = document.getElementById('filter-process-status').value;
      const receiveStart = document.getElementById('filter-receive-start').value;
      const receiveEnd = document.getElementById('filter-receive-end').value;
      
      filteredAlertsData = alertsData.filter(alert => {
        let match = true;
        
        if (disputeType && alert.disputeType !== disputeType) {
          match = false;
        }
        
        if (processStatus && alert.status !== processStatus) {
          match = false;
        }
        
        if (receiveStart) {
          const alertDate = new Date(alert.receiveTime);
          const startDate = new Date(receiveStart);
          if (alertDate < startDate) {
            match = false;
          }
        }
        
        if (receiveEnd) {
          const alertDate = new Date(alert.receiveTime);
          const endDate = new Date(receiveEnd + ' 23:59:59');
          if (alertDate > endDate) {
            match = false;
          }
        }
        
        return match;
      });
      
      currentAlertsPage = 1;
      renderAlertsTable();
      updateAlertsPagination();
    }

    // é‡ç½®é¢„è­¦ç­›é€‰
    function resetAlertFilters() {
      document.getElementById('filter-dispute-type').value = '';
      document.getElementById('filter-process-status').value = '';
      document.getElementById('filter-receive-start').value = '';
      document.getElementById('filter-receive-end').value = '';
      
      filteredAlertsData = [...alertsData];
      currentAlertsPage = 1;
      renderAlertsTable();
      updateAlertsPagination();
    }

    // æ›´æ–°é¢„è­¦åˆ†é¡µ
    function updateAlertsPagination() {
      const totalPages = Math.ceil(filteredAlertsData.length / alertsPerPage);
      const startIndex = (currentAlertsPage - 1) * alertsPerPage;
      const endIndex = Math.min(startIndex + alertsPerPage, filteredAlertsData.length);
      
      // æ›´æ–°åˆ†é¡µä¿¡æ¯
      document.getElementById('alerts-pagination-info').textContent = 
        `æ˜¾ç¤º ${startIndex + 1}-${endIndex} æ¡ï¼Œå…± ${filteredAlertsData.length} æ¡è®°å½•`;
      
      // æ›´æ–°æŒ‰é’®çŠ¶æ€
      document.getElementById('alerts-prev-btn').disabled = currentAlertsPage === 1;
      document.getElementById('alerts-next-btn').disabled = currentAlertsPage === totalPages || totalPages === 0;
      
      // æ›´æ–°é¡µç 
      const pageNumbers = document.getElementById('alerts-page-numbers');
      pageNumbers.innerHTML = '';
      
      for (let i = 1; i <= totalPages; i++) {
        const pageBtn = document.createElement('button');
        pageBtn.textContent = i;
        pageBtn.style.cssText = `
          width: 36px; height: 36px; 
          border: 1px solid ${i === currentAlertsPage ? 'var(--primary-orange)' : 'var(--gray-200)'}; 
          background: ${i === currentAlertsPage ? 'var(--primary-orange)' : 'var(--bg-primary)'}; 
          color: ${i === currentAlertsPage ? 'white' : 'inherit'}; 
          border-radius: var(--border-radius-md); 
          cursor: pointer;
        `;
        pageBtn.onclick = () => goToAlertsPage(i);
        pageNumbers.appendChild(pageBtn);
      }
    }

    // åˆ‡æ¢é¢„è­¦é¡µé¢
    function changeAlertsPage(direction) {
      const totalPages = Math.ceil(filteredAlertsData.length / alertsPerPage);
      const newPage = currentAlertsPage + direction;
      
      if (newPage >= 1 && newPage <= totalPages) {
        currentAlertsPage = newPage;
        renderAlertsTable();
        updateAlertsPagination();
      }
    }

    // è·³è½¬åˆ°æŒ‡å®šé¢„è­¦é¡µé¢
    function goToAlertsPage(page) {
      currentAlertsPage = page;
      renderAlertsTable();
      updateAlertsPagination();
    }

    // å¤„ç†é¢„è­¦åé¦ˆ
    function handleAlertFeedback(event) {
      event.preventDefault();
      
      const formData = new FormData(event.target);
      const feedbackResult = formData.get('feedback-result');
      const refundStatus = formData.get('refund-status');
      const isFraud = formData.get('is-fraud');
      const additionalComment = formData.get('additional-comment');
      const transactionRef = formData.get('transaction-ref');
      
      // éªŒè¯å¿…å¡«å­—æ®µ
      if (!feedbackResult) {
        alert('è¯·é€‰æ‹©åé¦ˆç»“æœ');
        return;
      }
      
      if (!refundStatus) {
        alert('è¯·é€‰æ‹©é€€æ¬¾çŠ¶æ€');
        return;
      }
      
      // å¦‚æœé€‰æ‹©å·²é€€æ¬¾ï¼ŒéªŒè¯é€€æ¬¾ç›¸å…³å­—æ®µ
      if (refundStatus === 'refunded') {
        const refundId = formData.get('refund-id');
        const refundDate = formData.get('refund-date');
        const refundCurrency = formData.get('refund-currency');
        const refundAmount = formData.get('refund-amount');
        
        if (!refundId || !refundId.trim()) {
          alert('è¯·è¾“å…¥é€€æ¬¾å•å·');
          return;
        }
        
        if (!refundDate) {
          alert('è¯·é€‰æ‹©é€€æ¬¾æ—¥æœŸ');
          return;
        }
        
        if (!refundCurrency) {
          alert('è¯·é€‰æ‹©é€€æ¬¾å¸ç§');
          return;
        }
        
        if (!refundAmount || parseFloat(refundAmount) <= 0) {
          alert('è¯·è¾“å…¥æœ‰æ•ˆçš„é€€æ¬¾é‡‘é¢');
          return;
        }
      }
      
      // éªŒè¯å­—ç¬¦é•¿åº¦é™åˆ¶
      if (additionalComment && additionalComment.length > 50) {
        alert('è¡¥å……æ„è§ä¸èƒ½è¶…è¿‡50ä¸ªå­—ç¬¦');
        return;
      }
      
      if (transactionRef && transactionRef.length > 50) {
        alert('æµæ°´å•å·ä¸èƒ½è¶…è¿‡50ä¸ªå­—ç¬¦');
        return;
      }
      
      // æäº¤æˆåŠŸåç¦ç”¨è¡¨å•
      const form = document.getElementById('feedback-form');
      const formElements = form.querySelectorAll('input, select, textarea, button');
      formElements.forEach(element => {
        element.disabled = true;
      });
      
      // æ·»åŠ æäº¤æˆåŠŸæ ‡è¯†
      const cardHeader = form.closest('.card').querySelector('.card-header');
      cardHeader.innerHTML = '<h3 class="card-title">åé¦ˆ <span class="badge badge-success">å·²æäº¤</span></h3>';
      
      alert('é¢„è­¦åé¦ˆæäº¤æˆåŠŸï¼');
      showPage('alerts');
    }

    // æ§åˆ¶é€€æ¬¾å­—æ®µæ˜¾ç¤ºéšè—
    function toggleRefundFields(status) {
      const refundFields = document.getElementById('refund-fields');
      const refundInputs = refundFields.querySelectorAll('input, select');
      
      if (status === 'refunded') {
        refundFields.style.display = 'block';
        refundInputs.forEach(input => {
          input.required = true;
        });
      } else {
        refundFields.style.display = 'none';
        refundInputs.forEach(input => {
          input.required = false;
          input.value = '';
        });
      }
    }
  </script>
</body>
</html> 